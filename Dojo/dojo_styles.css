:root{--bg1:#070a0f;--bg2:#0b0f14;--bg3:#0e1420;--line:#192537;--grid:#0e1a2a;--ink:#e7eef7;--teal:#16bdca;--violet:#a78bfa;--gold:#f59e0b;--pink:#f472b6;--blue:#60a5fa;--muted:#94a3b8;--pulse: drop-shadow(0 0 10px rgba(245,158,11,.45)) drop-shadow(0 0 20px rgba(245,158,11,.25))}
html,body{background:radial-gradient(1800px 1100px at 25% 25%, #10172a, var(--bg1));color:var(--ink);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
header{border-bottom:1px solid var(--line)}
.container{display:flex;height:calc(100% - 58px)}
.leftbar{width:380px;border-right:1px solid var(--line);display:flex;flex-direction:column;gap:10px;padding:12px;background:#0c1220}
.panel{background:#0e1526;border:1px solid #1a2740;border-radius:12px;padding:12px}
.small{font-size:12px;opacity:.75}
.legend .chip{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid #1a2740;background:#0a121d;margin:2px}
.main{flex:1;position:relative;overflow:hidden}
#stage{width:100%;height:100%;background:radial-gradient(2000px 1200px at 20% 20%, #0f172a, #070a0f);cursor:grab}
#stage.grabbing{cursor:grabbing}
svg text{user-select:none}
.node{transition:filter .15s ease;cursor:grab}
.node circle{stroke-width:2}
.node.future-on{filter:var(--pulse)}
.node.future-pulse{animation:glow 2.4s ease-in-out infinite}
.edge{stroke:#233452;stroke-width:1.3;opacity:.9}
.edge.hidden,.node.hidden{display:none}
.node.selected circle{stroke:#ffffff;stroke-width:3}
.drawer{position:absolute;right:16px;bottom:16px;width:560px;max-height:72%;overflow:auto;background:#0f1627;border:1px solid #1a2740;border-radius:12px;padding:14px;box-shadow:0 10px 28px rgba(0,0,0,.35)}
.drawer h2{margin:0 0 6px 0;font-size:18px}
.badge{display:inline-block;padding:2px 6px;border-radius:6px;font-size:11px;border:1px solid #1a2740;background:#0a121d;margin-right:6px}
.tabs{display:flex;gap:6px;margin:8px 0 0}
.tabbtn{padding:6px 10px;border-radius:8px;border:1px solid #1a2740;background:#0a121d;color:var(--ink);cursor:pointer;font-size:12px}
.tabbtn.active{background:#15213a}
.tabcontent{display:none;margin-top:8px;font-size:14px}
.tabcontent.active{display:block}
.notes-area{width:100%;min-height:120px;padding:8px}
hr.soft{border:none;border-top:1px solid #20304b;margin:8px 0}
@keyframes glow{0%{filter:drop-shadow(0 0 0 rgba(255,255,255,0))}50%{filter:var(--pulse)}100%{filter:drop-shadow(0 0 0 rgba(255,255,255,0))}}
